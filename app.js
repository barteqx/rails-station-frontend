((function(){var a,b,c={}.hasOwnProperty,d=function(a,b){return function(){return a.apply(b,arguments)}};_.defaults(this,{Before:function(a,b,c){return YouAreDaBomb(a,b).before(c)},BeforeAnyCallback:function(a,b,c){return YouAreDaBomb(a,b).beforeAnyCallback(c)},After:function(a,b,c){return YouAreDaBomb(a,b).after(c)},Around:function(a,b,c){return YouAreDaBomb(a,b).around(c)},AfterAll:function(a,b,c){var d,e,f,g;g=[];for(e=0,f=b.length;e<f;e++)d=b[e],g.push(After(a,d,c));return g},LogAll:function(a){var b,d,e;e=[];for(b in a){if(!c.call(a,b))continue;d=a[b],_.isFunction(d)?e.push(function(b){return Before(a,b,function(){return console.log("calling: "+b)})}(b)):e.push(void 0)}return e},AutoBind:function(a,b){var c,d,e;e=[];for(c in a)d=a[c],_.isFunction(d)?e.push(function(c){if(c.endsWith("Clicked")&&b[c.remove("Clicked")])return After(a,c,function(a){return b[c.remove("Clicked")](a)})}(c)):e.push(void 0);return e}}),b=function(){function a(a){this.namespace=a,this.flush=d(this.flush,this),this.remove=d(this.remove,this),this.get=d(this.get,this),this.set=d(this.set,this)}return a.prototype.set=function(a,b){return console.log(b),$.jStorage.set(""+this.namespace+"/"+a,b)},a.prototype.get=function(a){return $.jStorage.get(""+this.namespace+"/"+a)},a.prototype.remove=function(a){return $.jStorage.deleteKey(""+this.namespace+"/"+a)},a.prototype.flush=function(){var a,b,c,d,e;d=$.jStorage.index(),e=[];for(b=0,c=d.length;b<c;b++)a=d[b],a.match("^"+this.namespace)?e.push($.jStorage.deleteKey(a)):e.push(void 0);return e},a}(),this.UseCase=function(){function a(){this.showAlert=d(this.showAlert,this),this.logOut=d(this.logOut,this),this.loginSuccesful=d(this.loginSuccesful,this),this.getInitialData=d(this.getInitialData,this),this.streamProvided=d(this.streamProvided,this),this.start=d(this.start,this),this.stream=null,this.playing_playlist=!1}return a.prototype.start=function(){return this.getInitialData()},a.prototype.streamProvided=function(a){},a.prototype.getInitialData=function(){},a.prototype.loginSuccesful=function(a){return this.user=a},a.prototype.logOut=function(){return this.user=null},a.prototype.showAlert=function(a){},a}(),this.GUI=function(){function a(){this.showAlert=d(this.showAlert,this),this.logOut=d(this.logOut,this),this.loginSuccessful=d(this.loginSuccessful,this),this.loginUser=d(this.loginUser,this),this.getLiveStream=d(this.getLiveStream,this),this.confirmStreamButtonClicked=d(this.confirmStreamButtonClicked,this),this.refreshPlayer=d(this.refreshPlayer,this),this.createElementFor=d(this.createElementFor,this);var a=this;$("#podcasts-playlist").sortable(),$("#podcasts-playlist").selectable(),$("#play_livestream").click(function(){return a.getLiveStream()}),this.playerUI=$("#jp_container_1"),this.player=$("#jquery_jplayer_1")}return a.prototype.createElementFor=function(a,b){var c,d,e,f;return e=$(a).html(),f=Handlebars.compile(e),d=f(b),c=$(d)},a.prototype.refreshPlayer=function(a){var b;return this.player.jPlayer("clearMedia"),a.type==="stream"?(this.playerUI.removeClass("jp-audio"),this.playerUI.addClass("jp-audio-stream")):(this.playerUI.removeClass("jp-audio-stream"),this.playerUI.addClass("jp-audio")),b=a.source,this.player.jPlayer("setMedia",{mp3:b}),console.log(b),this.player.jPlayer({ready:function(){return $(this).jPlayer("setMedia",{mp3:b})},stop:function(){return $(this).jPlayer("clearMedia")},swfPath:"/js",supplied:"mp3"}),$("#track_title").text(a.title)},a.prototype.confirmStreamButtonClicked=function(a){return this.refreshPlayer(a)},a.prototype.getLiveStream=function(){},a.prototype.loginUser=function(a,b){},a.prototype.loginSuccessful=function(a){},a.prototype.logOut=function(){},a.prototype.showAlert=function(a){return alert(a.message)},a}(),this.Glue=function(){function a(a,b,c){var d=this;this.server_side=c,this.useCase=a[0],this.blogUseCase=a[1],this.podcastsUseCase=a[2],this.playlistUseCase=a[3],this.gui=b[0],this.playlistGUI=b[1],this.blogGUI=b[2],this.podcastsGUI=b[3],After(this.useCase,"start",function(){return d.gui.refreshPlayer(d.server_side.getStream())}),After(this.gui,"loginUser",function(a,b){return d.useCase.loginUser(a,b)}),After(this.useCase,"loginUser",function(a,b){return d.server_side.loginUser(a,b)}),After(this.server_side,"loginSuccessful",function(a){return d.useCase.loginSuccessful(a)}),After(this.useCase,"loginSuccessful",function(a){return d.gui.loginSuccessful(a)}),After(this.gui,"logOut",function(){return d.useCase.logOut()}),After(this.useCase,"logOut",function(){return d.server_side.logOut()}),After(this.server_side,"showAlert",function(a){return d.gui.showAlert(a)}),After(this.server_side,"showAlert",function(a){return d.gui.showAlert(a)}),After(this.gui,"getLiveStream",function(){return d.gui.refreshPlayer(d.server_side.getStream())}),LogAll(this.useCase),LogAll(this.gui),LogAll(this.podcastsGUI),LogAll(this.playlistGUI),LogAll(this.blogGUI)}return a}(),this.BlogPost=function(){function a(a,b,c,d,e){this.id=a,this.title=b,this.content=c,this.author=d,this.published=e}return a}(),this.PlaylistItem=function(){function a(a,b){this.id=a,this.episode=b}return a}(),this.Podcast=function(){function a(a,b,c,d,e){this.id=a,this.title=b,this.description=c,this.author=d,this.episodeCount=e}return a}(),this.User=function(){function a(a,b){this.id=a,this.login=b}return a}(),this.PodcastEpisode=function(){function a(a,b,c,d,e){this.id=a,this.number=b,this.title=c,this.podcast=d,this.source=e,this.type="file"}return a}(),this.Stream=function(){function a(a,b,c){this.id=a,this.source=b,this.title=c,this.type="stream"}return a}(),this.Alert=function(){function a(a){this.message=a}return a}(),this.FakeServerSide=function(){function a(){this.showAlert=d(this.showAlert,this),this.logOut=d(this.logOut,this),this.loginUnsuccessful=d(this.loginUnsuccessful,this),this.loginSuccesful=d(this.loginSuccesful,this),this.loginUser=d(this.loginUser,this),this.rcvdPlaylist=d(this.rcvdPlaylist,this),this.getPlaylist=d(this.getPlaylist,this),this.addUser=d(this.addUser,this),this.deleteUser=d(this.deleteUser,this),this.alterUser=d(this.alterUser,this),this.rcvdUsers=d(this.rcvdUsers,this),this.getUsers=d(this.getUsers,this),this.deletePodcastEpisodes=d(this.deletePodcastEpisodes,this),this.rcvdPodcastEpisodes=d(this.rcvdPodcastEpisodes,this),this.getPodcastEpisodes=d(this.getPodcastEpisodes,this),this.deletePodcast=d(this.deletePodcast,this),this.rcvdPodcast=d(this.rcvdPodcast,this),this.getPodcasts=d(this.getPodcasts,this),this.deletePost=d(this.deletePost,this),this.sendPost=d(this.sendPost,this),this.rcvdPosts=d(this.rcvdPosts,this),this.getPosts=d(this.getPosts,this),this.checkAutoPlay=d(this.checkAutoPlay,this),this.getStream=d(this.getStream,this);var a;this.user=null,this.users=[],a=new User(1,"tester"),this.posts=[],this.podcasts=[],this.playlist=[],this.episodes={}}return a.prototype.getStream=function(){return new Stream(0,"http://188.40.32.140:8172/stream","Kontestacja")},a.prototype.checkAutoPlay=function(){return!0},a.prototype.getPosts=function(a,b){return a==null&&(a=0),b==null&&(b=4),this.rcvdPosts(this.posts)},a.prototype.rcvdPosts=function(a){},a.prototype.sendPost=function(a){return this.posts.shift(a)},a.prototype.deletePost=function(a){},a.prototype.getPodcasts=function(){return rcvdPodcast(this.podcasts)},a.prototype.rcvdPodcast=function(a){},a.prototype.deletePodcast=function(a){},a.prototype.getPodcastEpisodes=function(a,b,c){return b==null&&(b=0),c==null&&(c=10),rcvdPodcastEpisodes(episodes[a.id])},a.prototype.rcvdPodcastEpisodes=function(a){},a.prototype.deletePodcastEpisodes=function(a){},a.prototype.getUsers=function(){return rcvdUsers(this.users)},a.prototype.rcvdUsers=function(a){},a.prototype.alterUser=function(a,b){},a.prototype.deleteUser=function(a){},a.prototype.addUser=function(a,b,c){},a.prototype.getPlaylist=function(){},a.prototype.rcvdPlaylist=function(a){},a.prototype.loginUser=function(a,b){return a==="xyz"&&b==="abc"?this.loginSuccesful(new User(1,"xyz")):this.loginUnsuccessful("Authentication failed - try again.")},a.prototype.loginSuccesful=function(a){return this.user=a},a.prototype.loginUnsuccessful=function(a){return this.showAlert(Alert(a))},a.prototype.logOut=function(){return this.user=null},a.prototype.showAlert=function(a){},a}(),this.PlaylistGUI=function(){function a(){this.createElementFor=d(this.createElementFor,this),$("#playlist-options").buttonset()}return a.prototype.createElementFor=function(a,b){var c,d,e,f;return e=$(a).html(),f=Handlebars.compile(e),d=f(b),c=$(d)},a}(),this.BlogGUI=function(){function a(){this.showPost=d(this.showPost,this),this.listPosts=d(this.listPosts,this),this.deletePost=d(this.deletePost,this),this.savePost=d(this.savePost,this),this.editPost=d(this.editPost,this),this.newPost=d(this.newPost,this),this.getPost=d(this.getPost,this),this.getPosts=d(this.getPosts,this),this.createElementFor=d(this.createElementFor,this),this.getPosts(0,4)}return a.prototype.createElementFor=function(a,b){var c,d,e,f;return e=$(a).html(),f=Handlebars.compile(e),d=f(b),c=$(d)},a.prototype.getPosts=function(a,b){},a.prototype.getPost=function(a){},a.prototype.newPost=function(){},a.prototype.editPost=function(a){},a.prototype.savePost=function(a,b,c,d){d==null&&(d=null)},a.prototype.deletePost=function(a){},a.prototype.listPosts=function(a){},a.prototype.showPost=function(a){},a}(),this.PodcastsGUI=function(){function a(){this.createElementFor=d(this.createElementFor,this)}return a.prototype.createElementFor=function(a,b){var c,d,e,f;return e=$(a).html(),f=Handlebars.compile(e),d=f(b),c=$(d)},a}(),this.BlogUseCase=function(){function a(){}return a}(),this.PodcastsUseCase=function(){function a(){}return a}(),this.PlaylistUseCase=function(){function a(){}return a}(),a=function(){function a(){var a,b,c,d;d=[new UseCase,new BlogUseCase,new PodcastsUseCase,new PlaylistUseCase],b=[new GUI,new PlaylistGUI,new BlogGUI,new PodcastsGUI],c=new FakeServerSide,a=new Glue(d,b,c),d[0].start(),window.useCase=d[0]}return a}(),$(document).ready(function(){return new a,$("a.jp-play").click(function(){return $("a.jp-pause").css("display","block")})})})).call(this)